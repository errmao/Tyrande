{"remainingRequest":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\other4\\Tyrande\\tyrande-ui\\src\\utils\\request.js","dependencies":[{"path":"D:\\other4\\Tyrande\\tyrande-ui\\src\\utils\\request.js","mtime":1597643615000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKLyoqCiAqIOWIm+W7uiBheGlvcwogKi8KCnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gcHJvY2Vzcy5lbnZbJ1ZVRV9BUFBfSE9TVF9VUkwnXSArIHByb2Nlc3MuZW52WydWVUVfQVBQX0JBU0VfQVBJJ10gOiBwcm9jZXNzLmVudlsnVlVFX0FQUF9CQVNFX0FQSSddLAogIC8vIOi2heaXtuaXtumXtAogIHRpbWVvdXQ6IDUwMDAKfSk7Ci8qKgogKiByZXF1ZXN0IOaLpuaIquWZqAogKi8KCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyDkv67mlLnmk43kvZzpnIDopoHljrvpmaTmjonkuKTkuKrml7bpl7Tlj4LmlbAKICBpZiAoY29uZmlnLm1ldGhvZCA9PSAncHV0JykgewogICAgdmFyIGRhdGEgPSBjb25maWcuZGF0YTsKICAgIHZhciBhcnIgPSBkYXRhLnNwbGl0KCcmJyk7CiAgICB2YXIgcmVzdWx0QXJyID0gW107CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGFycltpXS5pbmRleE9mKCd1cGRhdGVUaW1lJykgPT0gLTEgJiYgYXJyW2ldLmluZGV4T2YoJ2NyZWF0ZVRpbWUnKSA9PSAtMSkgewogICAgICAgIHJlc3VsdEFyci5wdXNoKGFycltpXSk7CiAgICAgIH0KICAgIH0KCiAgICBjb25maWcuZGF0YSA9IHJlc3VsdEFyci5qb2luKCcmJyk7CiAgfSAvLyDmiYDmnInor7fmsYLpg73mkLrluKYgdG9rZW4KCgogIGlmIChzdG9yZS5nZXR0ZXJzLnRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gZ2V0VG9rZW4oKTsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwovKioKICogcmVzcG9uc2Ug5oum5oiq5ZmoCiAqLwoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciByZXMgPSByZXNwb25zZS5kYXRhOwoKICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgIHJldHVybiByZXM7CiAgfSBlbHNlIHsKICAgIE1lc3NhZ2UoewogICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSB8fCAn57O757uf6ZSZ6K+vJywKICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgZHVyYXRpb246IDMgKiAxMDAwCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLm1lc3NhZ2UgfHwgJ+ezu+e7n+mUmeivrycpKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCdlcnI6JyArIGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogMyAqIDEwMDAKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["D:/other4/Tyrande/tyrande-ui/src/utils/request.js"],"names":["axios","Message","store","getToken","service","create","baseURL","process","env","NODE_ENV","timeout","interceptors","request","use","config","method","data","arr","split","resultArr","i","length","indexOf","push","join","getters","token","headers","error","console","log","Promise","reject","response","res","code","message","type","duration","Error"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { Message } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\n\n/**\n * 创建 axios\n */\nconst service = axios.create({\n  baseURL: process.env.NODE_ENV === 'production' ? process.env['VUE_APP_HOST_URL'] + process.env['VUE_APP_BASE_API'] : process.env['VUE_APP_BASE_API'],\n  // 超时时间\n  timeout: 5000\n})\n\n/**\n * request 拦截器\n */\nservice.interceptors.request.use(\n  config => {\n    // 修改操作需要去除掉两个时间参数\n    if (config.method == 'put') {\n      const data = config.data\n      const arr = data.split('&')\n      const resultArr = []\n      for (let i = 0; i < arr.length; i++) {\n        if (arr[i].indexOf('updateTime') == -1 && arr[i].indexOf('createTime') == -1) {\n          resultArr.push(arr[i])\n        }\n      }\n      config.data = resultArr.join('&')\n    }\n    // 所有请求都携带 token\n    if (store.getters.token) {\n      config.headers['Authorization'] = getToken()\n    }\n    return config\n  },\n  error => {\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n/**\n * response 拦截器\n */\nservice.interceptors.response.use(\n  response => {\n    const res = response.data\n    if (res.code === 0) {\n      return res\n    } else {\n      Message({\n        message: res.message || '系统错误',\n        type: 'error',\n        duration: 3 * 1000\n      })\n      return Promise.reject(new Error(res.message || '系统错误'))\n    }\n  },\n  error => {\n    console.log('err:' + error) // for debug\n    Message({\n      message: error.message,\n      type: 'error',\n      duration: 3 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}