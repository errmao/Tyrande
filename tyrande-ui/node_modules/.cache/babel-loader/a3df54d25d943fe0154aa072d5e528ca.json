{"remainingRequest":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\other4\\Tyrande\\tyrande-ui\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\other4\\Tyrande\\tyrande-ui\\src\\store\\modules\\permission.js","mtime":1597643615000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L290aGVyNC9UeXJhbmRlL3R5cmFuZGUtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyBhc3luY1JvdXRlcywgY29uc3RhbnRSb3V0ZXMgfSBmcm9tICdAL3JvdXRlcic7Ci8qKgogKiDliKTmlq3mmK/lkKbmi6XmnInoj5zljZXmnYPpmZAKICovCgpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKG1lbnVzLCByb3V0ZSkgewogIGlmIChtZW51cy5sZW5ndGggPT0gMCkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICB2YXIgcmVzdWx0ID0gZmFsc2U7CiAgbWVudXMuZm9yRWFjaChmdW5jdGlvbiAobWVudSkgewogICAgaWYgKG1lbnUubWVudVVybCA9PSByb3V0ZS5wYXRoKSB7CiAgICAgIHJlc3VsdCA9IHRydWU7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9KTsKICByZXR1cm4gcmVzdWx0Owp9Ci8qKgogKiDov4fmu6TmsqHmnInmnYPpmZDnmoToj5zljZUKICovCgoKZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVzKHJvdXRlcywgbWVudXMpIHsKICB2YXIgcmVzID0gW107CiAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdXRlKSB7CiAgICB2YXIgdG1wID0gX29iamVjdFNwcmVhZCh7fSwgcm91dGUpOwoKICAgIGlmIChoYXNQZXJtaXNzaW9uKG1lbnVzLCB0bXApKSB7CiAgICAgIGlmICh0bXAuY2hpbGRyZW4pIHsKICAgICAgICB0bXAuY2hpbGRyZW4gPSBmaWx0ZXJBc3luY1JvdXRlcyh0bXAuY2hpbGRyZW4sIG1lbnVzKTsKICAgICAgfQoKICAgICAgcmVzLnB1c2godG1wKTsKICAgIH0KICB9KTsKICByZXR1cm4gcmVzOwp9CnZhciBzdGF0ZSA9IHsKICByb3V0ZXM6IFtdLAogIGFkZFJvdXRlczogW10KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfUk9VVEVTOiBmdW5jdGlvbiBTRVRfUk9VVEVTKHN0YXRlLCByb3V0ZXMpIHsKICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgIHN0YXRlLnJvdXRlcyA9IGNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXMpOwogIH0KfTsKLyoqCiAqIOagueaNrueKtuaAgeWKoOi9vei3r+eUsQogKi8KCnZhciBhY3Rpb25zID0gewogIGdlbmVyYXRlUm91dGVzOiBmdW5jdGlvbiBnZW5lcmF0ZVJvdXRlcyhfcmVmLCBtZW51cykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIC8vIOafpeivogogICAgICB2YXIgYWNjZXNzZWRSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcyhhc3luY1JvdXRlcywgbWVudXMpOwogICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBhY2Nlc3NlZFJvdXRlcyk7CiAgICAgIHJlc29sdmUoYWNjZXNzZWRSb3V0ZXMpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["D:/other4/Tyrande/tyrande-ui/src/store/modules/permission.js"],"names":["asyncRoutes","constantRoutes","hasPermission","menus","route","length","result","forEach","menu","menuUrl","path","filterAsyncRoutes","routes","res","tmp","children","push","state","addRoutes","mutations","SET_ROUTES","concat","actions","generateRoutes","commit","Promise","resolve","accessedRoutes","namespaced"],"mappings":";;;;;AAAA,SAASA,WAAT,EAAsBC,cAAtB,QAA4C,UAA5C;AAEA;;;;AAGA,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,KAA9B,EAAqC;AACnC,MAAID,KAAK,CAACE,MAAN,IAAgB,CAApB,EAAuB;AACrB,WAAO,IAAP;AACD;;AACD,MAAIC,MAAM,GAAG,KAAb;AACAH,EAAAA,KAAK,CAACI,OAAN,CAAc,UAAAC,IAAI,EAAI;AACpB,QAAIA,IAAI,CAACC,OAAL,IAAgBL,KAAK,CAACM,IAA1B,EAAgC;AAC9BJ,MAAAA,MAAM,GAAG,IAAT;AACA,aAAO,KAAP;AACD;AACF,GALD;AAMA,SAAOA,MAAP;AACD;AAED;;;;;AAGA,OAAO,SAASK,iBAAT,CAA2BC,MAA3B,EAAmCT,KAAnC,EAA0C;AAC/C,MAAMU,GAAG,GAAG,EAAZ;AAEAD,EAAAA,MAAM,CAACL,OAAP,CAAe,UAAAH,KAAK,EAAI;AACtB,QAAMU,GAAG,qBAAQV,KAAR,CAAT;;AACA,QAAIF,aAAa,CAACC,KAAD,EAAQW,GAAR,CAAjB,EAA+B;AAC7B,UAAIA,GAAG,CAACC,QAAR,EAAkB;AAChBD,QAAAA,GAAG,CAACC,QAAJ,GAAeJ,iBAAiB,CAACG,GAAG,CAACC,QAAL,EAAeZ,KAAf,CAAhC;AACD;;AACDU,MAAAA,GAAG,CAACG,IAAJ,CAASF,GAAT;AACD;AACF,GARD;AAUA,SAAOD,GAAP;AACD;AAED,IAAMI,KAAK,GAAG;AACZL,EAAAA,MAAM,EAAE,EADI;AAEZM,EAAAA,SAAS,EAAE;AAFC,CAAd;AAKA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,UAAU,EAAE,oBAACH,KAAD,EAAQL,MAAR,EAAmB;AAC7BK,IAAAA,KAAK,CAACC,SAAN,GAAkBN,MAAlB;AACAK,IAAAA,KAAK,CAACL,MAAN,GAAeX,cAAc,CAACoB,MAAf,CAAsBT,MAAtB,CAAf;AACD;AAJe,CAAlB;AAOA;;;;AAGA,IAAMU,OAAO,GAAG;AACdC,EAAAA,cADc,gCACapB,KADb,EACoB;AAAA,QAAjBqB,MAAiB,QAAjBA,MAAiB;AAChC,WAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B;AACA,UAAMC,cAAc,GAAGhB,iBAAiB,CAACX,WAAD,EAAcG,KAAd,CAAxC;AACAqB,MAAAA,MAAM,CAAC,YAAD,EAAeG,cAAf,CAAN;AACAD,MAAAA,OAAO,CAACC,cAAD,CAAP;AACD,KALM,CAAP;AAMD;AARa,CAAhB;AAWA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbX,EAAAA,KAAK,EAALA,KAFa;AAGbE,EAAAA,SAAS,EAATA,SAHa;AAIbG,EAAAA,OAAO,EAAPA;AAJa,CAAf","sourcesContent":["import { asyncRoutes, constantRoutes } from '@/router'\n\n/**\n * 判断是否拥有菜单权限\n */\nfunction hasPermission(menus, route) {\n  if (menus.length == 0) {\n    return true\n  }\n  let result = false\n  menus.forEach(menu => {\n    if (menu.menuUrl == route.path) {\n      result = true\n      return false\n    }\n  })\n  return result\n}\n\n/**\n * 过滤没有权限的菜单\n */\nexport function filterAsyncRoutes(routes, menus) {\n  const res = []\n\n  routes.forEach(route => {\n    const tmp = { ...route }\n    if (hasPermission(menus, tmp)) {\n      if (tmp.children) {\n        tmp.children = filterAsyncRoutes(tmp.children, menus)\n      }\n      res.push(tmp)\n    }\n  })\n\n  return res\n}\n\nconst state = {\n  routes: [],\n  addRoutes: []\n}\n\nconst mutations = {\n  SET_ROUTES: (state, routes) => {\n    state.addRoutes = routes\n    state.routes = constantRoutes.concat(routes)\n  }\n}\n\n/**\n * 根据状态加载路由\n */\nconst actions = {\n  generateRoutes({ commit }, menus) {\n    return new Promise(resolve => {\n      // 查询\n      const accessedRoutes = filterAsyncRoutes(asyncRoutes, menus)\n      commit('SET_ROUTES', accessedRoutes)\n      resolve(accessedRoutes)\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}