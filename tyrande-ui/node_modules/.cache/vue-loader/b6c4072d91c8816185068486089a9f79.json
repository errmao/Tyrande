{"remainingRequest":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\other4\\Tyrande\\tyrande-ui\\src\\views\\system\\sysuser\\sysuser.vue?vue&type=style&index=0&id=644bf75b&lang=scss&scoped=true&","dependencies":[{"path":"D:\\other4\\Tyrande\\tyrande-ui\\src\\views\\system\\sysuser\\sysuser.vue","mtime":1597643615000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtYXZhdGFyIHsKICBwYWRkaW5nOiAwOwogIG1hcmdpbjogMDsKfQo="},{"version":3,"sources":["sysuser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4dA;AACA;AACA;AACA","file":"sysuser.vue","sourceRoot":"src/views/system/sysuser","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- 查询条件 -->\n    <el-card>\n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"app-container-searchForm\">\n        <el-form-item label=\"登录账户\">\n          <el-input v-model=\"searchForm.loginCode\" placeholder=\"登录账户\" />\n        </el-form-item>\n        <el-form-item label=\"用户名称\">\n          <el-input v-model=\"searchForm.userName\" placeholder=\"用户名称\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"getPageList\">\n            {{ defaultSettings.btnSearch }}\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n\n    <!-- 数据列表 -->\n    <el-card>\n      <el-row class=\"app-container-toolbar\">\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-circle-plus-outline\"\n          @click=\"visibleConfig.add = true\"\n        >{{ defaultSettings.btnAdd }}\n        </el-button>\n\n        <el-button\n          type=\"warning\"\n          icon=\"el-icon-attract\"\n          @click=\"doConfigRole\"\n        >角色配置\n        </el-button>\n      </el-row>\n\n      <!-- 数据表格 -->\n      <el-table border :data=\"gridData.list\" highlight-current-row @current-change=\"doCurrentChange\">\n        <el-table-column type=\"index\" label=\"序号\" width=\"50\" />\n        <el-table-column prop=\"loginCode\" label=\"登陆账户\" />\n        <el-table-column prop=\"userName\" label=\"用户名称\" />\n        <el-table-column prop=\"sex\" label=\"性别\" :formatter=\"formatSex\" />\n        <el-table-column prop=\"age\" label=\"年龄\" />\n        <el-table-column prop=\"avatar\" label=\"头像\" width=\"70\">\n          <template slot-scope=\"score\">\n            <el-avatar shape=\"square\" :size=\"30\" :src=\"score.row.avatar\"></el-avatar>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"address\" label=\"地址\" />\n        <el-table-column prop=\"email\" label=\"邮箱\" width=\"160\" />\n        <el-table-column prop=\"validEmail\" label=\"邮箱验证\" :formatter=\"formatIsOrNot\" />\n        <el-table-column prop=\"tel\" label=\"电话\" />\n        <el-table-column prop=\"validTel\" label=\"电话验证\" :formatter=\"formatIsOrNot\" />\n        <el-table-column prop=\"status\" label=\"用户状态\" :formatter=\"formatUserStatus\" />\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              icon=\"el-icon-view\"\n              size=\"small\"\n              @click=\"doView(scope.row)\"\n            >\n              {{ defaultSettings.btnView }}\n            </el-button>\n            <el-button\n              type=\"text\"\n              icon=\"el-icon-edit\"\n              size=\"small\"\n              @click=\"doEdit(scope.row.id)\"\n            >\n              {{ defaultSettings.btnEdit }}\n            </el-button>\n            <el-button\n              type=\"text\"\n              icon=\"el-icon-delete\"\n              size=\"small\"\n              @click=\"doDelete(scope.row.id)\"\n            >{{ defaultSettings.btnDelete }}\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页区域 -->\n      <el-pagination\n        :current-page=\"searchForm.current\"\n        :layout=\"defaultSettings.page\"\n        :total=\"gridData.total\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </el-card>\n\n    <!-- 查看 -->\n    <el-dialog :title=\"defaultSettings.btnView\" :visible.sync=\"visibleConfig.view\" width=\"50%\">\n      <span>\n        <el-form :model=\"viewForm\" label-width=\"120px\" disabled>\n          <el-form-item label=\"登陆账户\" prop=\"loginCode\">\n            <el-input v-model=\"viewForm.loginCode\" />\n          </el-form-item>\n          <el-form-item label=\"用户名称\" prop=\"userName\">\n            <el-input v-model=\"viewForm.userName\" />\n          </el-form-item>\n          <el-form-item label=\"性别\" prop=\"sex\">\n            <el-select v-model=\"viewForm.sex\">\n              <option-dict :dict=\"defaultSettings.dict.sex\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"年龄\" prop=\"age\">\n            <el-input-number v-model=\"viewForm.age\" :min=\"0\" :max=\"150\" />\n          </el-form-item>\n          <el-form-item label=\"地址\" prop=\"address\">\n            <el-input v-model=\"viewForm.address\" />\n          </el-form-item>\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-input v-model=\"viewForm.email\" />\n          </el-form-item>\n          <el-form-item label=\"邮箱验证\" prop=\"validEmail\">\n            <el-select v-model=\"viewForm.validEmail\">\n              <option-dict :dict=\"defaultSettings.dict.isOrNot\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"电话\" prop=\"tel\">\n            <el-input v-model=\"viewForm.tel\" />\n          </el-form-item>\n          <el-form-item label=\"电话验证\" prop=\"validTel\">\n            <el-select v-model=\"viewForm.validTel\">\n              <option-dict :dict=\"defaultSettings.dict.isOrNot\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"用户状态\" prop=\"status\">\n            <el-select v-model=\"viewForm.status\">\n              <option-dict :dict=\"defaultSettings.dict.userStatus\" />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          @click=\"visibleConfig.view = false\"\n        >{{ defaultSettings.closeButtonText }}</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 添加 -->\n    <el-dialog\n      :title=\"defaultSettings.btnAdd\"\n      :visible.sync=\"visibleConfig.add\"\n      width=\"50%\"\n      @close=\"doAddClose\"\n    >\n      <span>\n        <el-form ref=\"addFormRef\" :model=\"addForm\" :rules=\"checkRules\" label-width=\"120px\">\n          <el-form-item label=\"登陆账户\" prop=\"loginCode\">\n            <el-input v-model=\"addForm.loginCode\" />\n          </el-form-item>\n          <el-form-item label=\"用户名称\" prop=\"userName\">\n            <el-input v-model=\"addForm.userName\" />\n          </el-form-item>\n          <el-form-item label=\"性别\" prop=\"sex\">\n            <el-select v-model=\"addForm.sex\" placeholder=\"请选择\">\n              <option-dict :dict=\"defaultSettings.dict.sex\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"年龄\" prop=\"age\">\n            <el-input-number v-model=\"addForm.age\" :min=\"0\" :max=\"150\" />\n          </el-form-item>\n          <el-form-item label=\"地址\" prop=\"address\">\n            <el-input v-model=\"addForm.address\" />\n          </el-form-item>\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-input v-model=\"addForm.email\" />\n          </el-form-item>\n          <el-form-item label=\"电话\" prop=\"tel\">\n            <el-input v-model=\"addForm.tel\" />\n          </el-form-item>\n          <el-form-item label=\"用户状态\" prop=\"status\">\n            <el-select v-model=\"addForm.status\" placeholder=\"请选择\">\n              <option-dict :dict=\"defaultSettings.dict.userStatus\" />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          @click=\"visibleConfig.add = false\"\n        >{{ defaultSettings.cancelButtonText }}</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"doAddSave\"\n        >{{ defaultSettings.confirmButtonText }}</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 编辑 -->\n    <el-dialog\n      :title=\"defaultSettings.btnEdit\"\n      :visible.sync=\"visibleConfig.edit\"\n      width=\"50%\"\n      @close=\"doEditClose\"\n    >\n      <span>\n        <el-form ref=\"editFormRef\" :model=\"editForm\" :rules=\"checkRules\" label-width=\"120px\">\n          <el-form-item label=\"登陆账户\" prop=\"loginCode\">\n            <el-input v-model=\"editForm.loginCode\" />\n          </el-form-item>\n          <el-form-item label=\"用户名称\" prop=\"userName\">\n            <el-input v-model=\"editForm.userName\" />\n          </el-form-item>\n          <el-form-item label=\"性别\" prop=\"sex\">\n            <el-select v-model=\"editForm.sex\" placeholder=\"请选择\">\n              <option-dict :dict=\"defaultSettings.dict.sex\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"年龄\" prop=\"age\">\n            <el-input v-model=\"editForm.age\" />\n          </el-form-item>\n          <el-form-item label=\"地址\" prop=\"address\">\n            <el-input v-model=\"editForm.address\" />\n          </el-form-item>\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-input v-model=\"editForm.email\" />\n          </el-form-item>\n          <el-form-item label=\"电话\" prop=\"tel\">\n            <el-input v-model=\"editForm.tel\" />\n          </el-form-item>\n          <el-form-item label=\"用户状态\" prop=\"status\">\n            <el-select v-model=\"editForm.status\" placeholder=\"请选择\">\n              <option-dict :dict=\"defaultSettings.dict.userStatus\" />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          @click=\"visibleConfig.edit = false\"\n        >{{ defaultSettings.cancelButtonText }}</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"doEditSave\"\n        >{{ defaultSettings.confirmButtonText }}</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 设置角色 -->\n    <el-dialog\n      title=\"角色设置\"\n      :visible.sync=\"visibleConfig.roleConfig\"\n      width=\"50%\"\n      @close=\"doRoleConfigClose\"\n    >\n      <span>\n        <el-form ref=\"configFormRef\" :model=\"configForm\" label-width=\"120px\">\n          <el-form-item label=\"用户名称\">\n            <el-input v-model=\"configForm.userName\" disabled />\n          </el-form-item>\n          <el-form-item label=\"角色\">\n            <el-select v-model=\"configForm.roles\" multiple placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in configInitData.roleList\"\n                :key=\"item.id\"\n                :label=\"item.roleName\"\n                :value=\"item.id\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          @click=\"visibleConfig.roleConfig = false\"\n        >{{ defaultSettings.cancelButtonText }}</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"doConfigSave\"\n        >{{ defaultSettings.confirmButtonText }}</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport defaultSettings from '@/settings'\nimport { doAddSave, doDelete, doEditSave, doView, getPageList, getUserRoleInfo, doConfigSave } from '@/api/system/sysuser/SysUser'\n\nexport default {\n  name: 'SysUser',\n  data() {\n    return {\n      defaultSettings: defaultSettings,\n\n      // 查询参数对象\n      searchForm: {\n        current: 1\n      },\n      // 列表数据\n      gridData: {\n        list: [],\n        total: 0\n      },\n\n      // 对话框是否展示配置\n      visibleConfig: {\n        add: false,\n        edit: false,\n        view: false,\n        roleConfig: false\n      },\n\n      // 添加或编辑对话框校验规则\n      checkRules: {\n        loginCode: [{ required: true, message: '请输入登陆账户', trigger: 'blur' }],\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n        userName: [{ required: true, message: '请输入用户名称', trigger: 'blur' }],\n        sex: [{ required: true, message: '请输入性别', trigger: 'blur' }],\n        age: [{ required: true, message: '请输入年龄', trigger: 'blur' }],\n        status: [{ required: true, message: '请输入用户状态', trigger: 'blur' }]\n      },\n\n      // 查看数据\n      viewForm: {},\n\n      // 添加对话框数据\n      addForm: {},\n\n      // 编辑对话框数据\n      editForm: {},\n\n      configForm: {\n        id: '',\n        userName: '',\n        roles: []\n      },\n      // 当前选中行\n      currentRow: null,\n      configInitData: {\n        roleList: []\n      }\n    }\n  },\n  created() {\n    this.$getDict(defaultSettings.dict.sex)\n    this.$getDict(defaultSettings.dict.userStatus)\n    this.$getDict(defaultSettings.dict.isOrNot)\n    this.getPageList()\n  },\n  methods: {\n    // 列表查询\n    getPageList() {\n      getPageList(this.searchForm).then((res) => {\n        const { records, total } = res.data\n        this.gridData.list = records\n        this.gridData.total = total\n      }).catch(() => {\n        this.$message.error(defaultSettings.failureSearch)\n      })\n    },\n\n    // 分页栏页数改变监听\n    handleCurrentChange(newCurrent) {\n      this.searchForm.current = newCurrent\n      this.getPageList()\n    },\n\n    // 查看\n    doView(row) {\n      this.visibleConfig.view = true\n      this.viewForm = row\n      this.viewForm.sex = row.sex + ''\n      this.viewForm.validTel = row.validTel + ''\n      this.viewForm.validEmail = row.validEmail + ''\n      this.viewForm.status = row.status + ''\n    },\n\n    // 删除\n    doDelete(id) {\n      const rowId = id\n      this.$confirm(defaultSettings.deleteText, defaultSettings.typeInfoText, {\n        confirmButtonText: defaultSettings.confirmButtonText,\n        cancelButtonText: defaultSettings.cancelButtonText,\n        type: defaultSettings.typeWarning\n      }).then(\n        async() => {\n          doDelete(rowId).then(() => {\n            this.$message.success(defaultSettings.successDelete)\n          })\n          this.getPageList()\n        })\n    },\n\n    // 添加-保存\n    doAddSave() {\n      this.$refs.addFormRef.validate(async valid => {\n        if (!valid) {\n          return\n        }\n        await doAddSave(this.addForm)\n        this.$message.success(defaultSettings.successAdd)\n        this.visibleConfig.add = false\n        this.getPageList()\n      })\n    },\n    // 添加-关闭\n    doAddClose() {\n      this.$refs.addFormRef.resetFields()\n    },\n\n    // 编辑\n    async doEdit(id) {\n      const res = await doView(id)\n      this.editForm = res.data\n      this.editForm.sex = res.data.sex + ''\n      this.editForm.status = res.data.status + ''\n      this.visibleConfig.edit = true\n    },\n\n    // 编辑-保存\n    doEditSave() {\n      this.$refs.editFormRef.validate(async valid => {\n        if (!valid) {\n          return\n        }\n        await doEditSave(this.editForm)\n        this.$message.success(defaultSettings.successEdit)\n        this.visibleConfig.edit = false\n        this.getPageList()\n      })\n    },\n\n    // 编辑-关闭\n    doEditClose() {\n      this.$refs.editFormRef.resetFields()\n    },\n\n    // 格式化\n    formatSex(row, column, cellValue) {\n      return this.$formatDict(cellValue, defaultSettings.dict.sex)\n    },\n    formatIsOrNot(row, column, cellValue) {\n      return this.$formatDict(cellValue, defaultSettings.dict.isOrNot)\n    },\n    formatUserStatus(row, column, cellValue) {\n      return this.$formatDict(cellValue, defaultSettings.dict.userStatus)\n    },\n    doCurrentChange(currentRow) {\n      this.currentRow = currentRow\n    },\n    async doConfigRole() {\n      if (this.currentRow == null) {\n        this.$message.error('请选择一条记录')\n        return\n      }\n      // 查询用户信息\n      const { data } = await getUserRoleInfo(this.currentRow.id)\n      this.configInitData = data\n      this.configForm.id = this.currentRow.id\n      this.configForm.userName = this.currentRow.userName\n      this.configForm.roles = data.userRole\n      this.visibleConfig.roleConfig = true\n    },\n\n    doRoleConfigClose() {\n      this.$refs.configFormRef.resetFields()\n    },\n\n    async doConfigSave() {\n      await doConfigSave(this.configForm)\n      this.$message.success(defaultSettings.successSave)\n      this.visibleConfig.roleConfig = false\n    }\n  }\n}\n</script>\n\n<style lang='scss' scoped>\n.el-avatar {\n  padding: 0;\n  margin: 0;\n}\n</style>\n"]}]}