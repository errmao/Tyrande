{"remainingRequest":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\other4\\Tyrande\\tyrande-ui\\src\\views\\system\\sysrole\\sysrole.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\other4\\Tyrande\\tyrande-ui\\src\\views\\system\\sysrole\\sysrole.vue","mtime":1597643615000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\other4\\Tyrande\\tyrande-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkZWZhdWx0U2V0dGluZ3MgZnJvbSAnQC9zZXR0aW5ncycKaW1wb3J0IHsKICBkb0FkZFNhdmUsCiAgZG9EZWxldGUsCiAgZG9FZGl0U2F2ZSwKICBkb1ZpZXcsCiAgZ2V0UGFnZUxpc3QsCiAgZ2V0Um9sZU1lbnUsCiAgc2F2ZVJvbGVNZW51Cn0gZnJvbSAnQC9hcGkvc3lzdGVtL3N5c3JvbGUvU3lzUm9sZScKaW1wb3J0IHsKICBnZXRQYWdlTGlzdCBhcyBnZXRNZW51VHJlZQp9IGZyb20gJ0AvYXBpL3N5c3RlbS9zeXNtZW51L1N5c01lbnUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1N5c1JvbGUnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZhdWx0U2V0dGluZ3M6IGRlZmF1bHRTZXR0aW5ncywKCiAgICAgIC8vIOafpeivouWPguaVsOWvueixoQogICAgICBzZWFyY2hGb3JtOiB7CiAgICAgICAgY3VycmVudDogMQogICAgICB9LAogICAgICAvLyDliJfooajmlbDmja4KICAgICAgZ3JpZERhdGE6IHsKICAgICAgICBsaXN0OiBbXSwKICAgICAgICB0b3RhbDogMAogICAgICB9LAoKICAgICAgLy8g5a+56K+d5qGG5piv5ZCm5bGV56S66YWN572uCiAgICAgIHZpc2libGVDb25maWc6IHsKICAgICAgICBhZGQ6IGZhbHNlLAogICAgICAgIGVkaXQ6IGZhbHNlLAogICAgICAgIHZpZXc6IGZhbHNlCiAgICAgIH0sCgogICAgICAvLyDmt7vliqDmiJbnvJbovpHlr7nor53moYbmoKHpqozop4TliJkKICAgICAgY2hlY2tSdWxlczogewogICAgICAgIHJvbGVOYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeinkuiJsuWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICByb2xlRGVzYzogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLmj4/ov7AnLCB0cmlnZ2VyOiAnYmx1cicgfV0KICAgICAgfSwKCiAgICAgIC8vIOafpeeci+aVsOaNrgogICAgICB2aWV3Rm9ybToge30sCgogICAgICAvLyDmt7vliqDlr7nor53moYbmlbDmja4KICAgICAgYWRkRm9ybToge30sCgogICAgICAvLyDnvJbovpHlr7nor53moYbmlbDmja4KICAgICAgZWRpdEZvcm06IHt9LAoKICAgICAgLyoqCiAgICAgICAqIOiPnOWNleagkemFjee9rgogICAgICAgKi8KICAgICAgcHJvcHM6IHsKICAgICAgICBsYWJlbDogJ21lbnVOYW1lJywKICAgICAgICBjaGlsZHJlbjogJ3N1YicKICAgICAgfSwKICAgICAgdHJlZURhdGE6IFtdLAogICAgICAvLyDpgInkuK3nmoTop5LoibIKICAgICAgc2VsZWN0OiB7CiAgICAgICAgbWVudTogW10sCiAgICAgICAgcm9sZTogbnVsbAogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRQYWdlTGlzdCgpCiAgICB0aGlzLmluaXRNZW51VHJlZSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliJfooajmn6Xor6IKICAgIGdldFBhZ2VMaXN0KCkgewogICAgICBnZXRQYWdlTGlzdCh0aGlzLnNlYXJjaEZvcm0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IHsgcmVjb3JkcywgdG90YWwgfSA9IHJlcy5kYXRhCiAgICAgICAgdGhpcy5ncmlkRGF0YS5saXN0ID0gcmVjb3JkcwogICAgICAgIHRoaXMuZ3JpZERhdGEudG90YWwgPSB0b3RhbAogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkZWZhdWx0U2V0dGluZ3MuZmFpbHVyZVNlYXJjaCkKICAgICAgfSkKICAgIH0sCgogICAgLy8g5YiG6aG15qCP6aG15pWw5pS55Y+Y55uR5ZCsCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld0N1cnJlbnQpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtLmN1cnJlbnQgPSBuZXdDdXJyZW50CiAgICAgIHRoaXMuZ2V0UGFnZUxpc3QoKQogICAgfSwKCiAgICAvLyDliKDpmaQKICAgIGRvRGVsZXRlKGlkKSB7CiAgICAgIGNvbnN0IHJvd0lkID0gaWQKICAgICAgdGhpcy4kY29uZmlybShkZWZhdWx0U2V0dGluZ3MuZGVsZXRlVGV4dCwgZGVmYXVsdFNldHRpbmdzLnR5cGVJbmZvVGV4dCwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBkZWZhdWx0U2V0dGluZ3MuY29uZmlybUJ1dHRvblRleHQsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogZGVmYXVsdFNldHRpbmdzLmNhbmNlbEJ1dHRvblRleHQsCiAgICAgICAgdHlwZTogZGVmYXVsdFNldHRpbmdzLnR5cGVXYXJuaW5nCiAgICAgIH0pLnRoZW4oCiAgICAgICAgYXN5bmMoKSA9PiB7CiAgICAgICAgICBkb0RlbGV0ZShyb3dJZCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhkZWZhdWx0U2V0dGluZ3Muc3VjY2Vzc0RlbGV0ZSkKICAgICAgICAgICAgdGhpcy5nZXRQYWdlTGlzdCgpCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAoKICAgIC8vIOa3u+WKoC3kv53lrZgKICAgIGRvQWRkU2F2ZSgpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtUmVmLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgYXdhaXQgZG9BZGRTYXZlKHRoaXMuYWRkRm9ybSkKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoZGVmYXVsdFNldHRpbmdzLnN1Y2Nlc3NBZGQpCiAgICAgICAgdGhpcy52aXNpYmxlQ29uZmlnLmFkZCA9IGZhbHNlCiAgICAgICAgdGhpcy5nZXRQYWdlTGlzdCgpCiAgICAgIH0pCiAgICB9LAogICAgLy8g5re75YqgLeWFs+mXrQogICAgZG9BZGRDbG9zZSgpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCgogICAgLy8g57yW6L6RCiAgICBhc3luYyBkb0VkaXQoaWQpIHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZG9WaWV3KGlkKQogICAgICB0aGlzLmVkaXRGb3JtID0gcmVzLmRhdGEKICAgICAgdGhpcy52aXNpYmxlQ29uZmlnLmVkaXQgPSB0cnVlCiAgICB9LAoKICAgIC8vIOe8lui+kS3kv53lrZgKICAgIGRvRWRpdFNhdmUoKSB7CiAgICAgIHRoaXMuJHJlZnMuZWRpdEZvcm1SZWYudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBhd2FpdCBkb0VkaXRTYXZlKHRoaXMuZWRpdEZvcm0pCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGRlZmF1bHRTZXR0aW5ncy5zdWNjZXNzRWRpdCkKICAgICAgICB0aGlzLnZpc2libGVDb25maWcuZWRpdCA9IGZhbHNlCiAgICAgICAgdGhpcy5nZXRQYWdlTGlzdCgpCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOe8lui+kS3lhbPpl60KICAgIGRvRWRpdENsb3NlKCkgewogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDop5LoibLooajmoLzooYzngrnlh7vkuovku7YKICAgIGFzeW5jIHJvbGVSb3dDaGFuZ2VDbGljayhjdXJyZW50Um93KSB7CiAgICAgIC8vIOmHjee9ruWPs+S+p+iPnOWNlemdouadvwogICAgICB0aGlzLnNlbGVjdC5tZW51ID0gW10KICAgICAgYXdhaXQgdGhpcy5pbml0TWVudVRyZWUoKQogICAgICAvLyDmn6Xor6LpnIDopoHli77pgInnmoQKICAgICAgaWYgKGN1cnJlbnRSb3cgPT0gbnVsbCkgewogICAgICAgIHRoaXMuc2VsZWN0LnJvbGUgPSBudWxsCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5pyJ6YCJ5Lit55qE6KeS6ImyCiAgICAgICAgdGhpcy5zZWxlY3Qucm9sZSA9IGN1cnJlbnRSb3cKICAgICAgICAvLyDmn6Xor6Lop5LoibLmi6XmnInnmoToj5zljZUKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGdldFJvbGVNZW51KGN1cnJlbnRSb3cuaWQpCiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgdGhpcy5zZWxlY3QubWVudSA9IGRhdGEKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiDoj5zljZXmoJHphY3nva4KICAgICAqLwogICAgLy8g5Yid5aeL5YyW6I+c5Y2V5qCR5pWw5o2uCiAgICBhc3luYyBpbml0TWVudVRyZWUoKSB7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldE1lbnVUcmVlKCkKICAgICAgdGhpcy50cmVlRGF0YSA9IHJlcy5kYXRhCiAgICB9LAoKICAgIC8vIOS/neWtmOinkuiJsuadg+mZkOWFs+iBlAogICAgYXN5bmMgc2F2ZVJvbGVNZW51KCkgewogICAgICAvLyDliKTor7vmmK/lkKbpgInmi6nop5LoibIKICAgICAgaWYgKHRoaXMuc2VsZWN0LnJvbGUgPT0gbnVsbCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeinkuiJsicpCiAgICAgIH0KICAgICAgLy8g6I635Y+W6YCJ5Lit6I+c5Y2V5p2D6ZmQCiAgICAgIGNvbnN0IHNlbGVjdEFyciA9IHRoaXMuJHJlZnMubWVudVRyZWVSZWYuZ2V0Q2hlY2tlZEtleXMoKQogICAgICBjb25zdCBkYXRhID0gewogICAgICAgIHJvbGU6IHRoaXMuc2VsZWN0LnJvbGUuaWQsCiAgICAgICAgbWVudTogc2VsZWN0QXJyCiAgICAgIH0KICAgICAgYXdhaXQgc2F2ZVJvbGVNZW51KGRhdGEpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhkZWZhdWx0U2V0dGluZ3Muc3VjY2Vzc1NhdmUpCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["sysrole.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sysrole.vue","sourceRoot":"src/views/system/sysrole","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- 查询条件 -->\n    <el-card>\n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"app-container-searchForm\">\n        <el-form-item label=\"角色名称\">\n          <el-input v-model=\"searchForm.roleName\" placeholder=\"角色名称\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"getPageList\">\n            {{ defaultSettings.btnSearch }}\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n\n    <el-row :gutter=\"20\">\n      <!-- 字典项表格 -->\n      <el-col :span=\"11\">\n        <!-- 数据列表 -->\n        <el-card class=\"role_menu_role_class\">\n          <el-row class=\"app-container-toolbar\">\n            <el-button\n              type=\"primary\"\n              icon=\"el-icon-circle-plus-outline\"\n              @click=\"visibleConfig.add = true\"\n            >\n              {{ defaultSettings.btnAdd }}\n            </el-button>\n          </el-row>\n\n          <!-- 数据表格 -->\n          <el-table border :data=\"gridData.list\" highlight-current-row @current-change=\"roleRowChangeClick\">\n            <el-table-column type=\"index\" label=\"序号\" width=\"50\" />\n            <el-table-column prop=\"roleName\" label=\"角色名称\" />\n            <el-table-column prop=\"roleDesc\" label=\"角色描述\" />\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  type=\"text\"\n                  icon=\"el-icon-view\"\n                  size=\"small\"\n                  @click=\"visibleConfig.view =true, viewForm = scope.row\"\n                >\n                  {{ defaultSettings.btnView }}\n                </el-button>\n                <el-button\n                  type=\"text\"\n                  icon=\"el-icon-edit\"\n                  size=\"small\"\n                  @click=\"doEdit(scope.row.id)\"\n                >\n                  {{ defaultSettings.btnEdit }}\n                </el-button>\n                <el-button\n                  type=\"text\"\n                  icon=\"el-icon-delete\"\n                  size=\"small\"\n                  @click=\"doDelete(scope.row.id)\"\n                >{{ defaultSettings.btnDelete }}\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n\n          <!-- 分页区域 -->\n          <el-pagination\n            :current-page=\"searchForm.current\"\n            :layout=\"defaultSettings.page\"\n            :total=\"gridData.total\"\n            @current-change=\"handleCurrentChange\"\n          />\n        </el-card>\n      </el-col>\n\n      <!-- 分配菜单区域 -->\n      <el-col :span=\"13\">\n        <el-card class=\"role_menu_menu_class\">\n          <el-row class=\"app-container-toolbar\">\n            <div class=\"tool-btn-three\">\n              <el-button\n                type=\"primary\"\n                icon=\"el-icon-sunny\"\n                @click=\"saveRoleMenu\"\n              >\n                {{ defaultSettings.btnSave }}\n              </el-button>\n            </div>\n          </el-row>\n          <div class=\"tree-class\">\n            <el-tree\n              ref=\"menuTreeRef\"\n              :data=\"treeData\"\n              node-key=\"id\"\n              default-expand-all\n              :default-checked-keys=\"select.menu\"\n              :props=\"props\"\n              check-strictly\n              show-checkbox\n            />\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!-- 查看 -->\n    <el-dialog :title=\"defaultSettings.btnView\" :visible.sync=\"visibleConfig.view\" width=\"50%\">\n      <span>\n        <el-form :model=\"viewForm\" label-width=\"120px\" disabled>\n          <el-form-item label=\"角色名称\" prop=\"roleName\">\n            <el-input v-model=\"viewForm.roleName\" />\n          </el-form-item>\n          <el-form-item label=\"角色描述\" prop=\"roleDesc\">\n            <el-input v-model=\"viewForm.roleDesc\" />\n          </el-form-item>\n        </el-form>\n      </span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"visibleConfig.view = false\">{{ defaultSettings.closeButtonText }}</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 添加 -->\n    <el-dialog\n      :title=\"defaultSettings.btnAdd\"\n      :visible.sync=\"visibleConfig.add\"\n      width=\"50%\"\n      @close=\"doAddClose\"\n    >\n      <span>\n        <el-form ref=\"addFormRef\" :model=\"addForm\" :rules=\"checkRules\" label-width=\"120px\">\n          <el-form-item label=\"角色名称\" prop=\"roleName\">\n            <el-input v-model=\"addForm.roleName\" />\n          </el-form-item>\n          <el-form-item label=\"角色描述\" prop=\"roleDesc\">\n            <el-input v-model=\"addForm.roleDesc\" />\n          </el-form-item>\n        </el-form>\n      </span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          @click=\"visibleConfig.add = false\"\n        >{{ defaultSettings.cancelButtonText }}</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"doAddSave\"\n        >{{ defaultSettings.confirmButtonText }}</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 编辑 -->\n    <el-dialog\n      :title=\"defaultSettings.btnEdit\"\n      :visible.sync=\"visibleConfig.edit\"\n      width=\"50%\"\n      @close=\"doEditClose\"\n    >\n      <span>\n        <el-form ref=\"editFormRef\" :model=\"editForm\" :rules=\"checkRules\" label-width=\"120px\">\n          <el-form-item label=\"角色名称\" prop=\"roleName\">\n            <el-input v-model=\"editForm.roleName\" />\n          </el-form-item>\n          <el-form-item label=\"角色描述\" prop=\"roleDesc\">\n            <el-input v-model=\"editForm.roleDesc\" />\n          </el-form-item>\n        </el-form>\n      </span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          @click=\"visibleConfig.edit = false\"\n        >{{ defaultSettings.cancelButtonText }}</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"doEditSave\"\n        >{{ defaultSettings.confirmButtonText }}</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport defaultSettings from '@/settings'\nimport {\n  doAddSave,\n  doDelete,\n  doEditSave,\n  doView,\n  getPageList,\n  getRoleMenu,\n  saveRoleMenu\n} from '@/api/system/sysrole/SysRole'\nimport {\n  getPageList as getMenuTree\n} from '@/api/system/sysmenu/SysMenu'\n\nexport default {\n  name: 'SysRole',\n  data() {\n    return {\n      defaultSettings: defaultSettings,\n\n      // 查询参数对象\n      searchForm: {\n        current: 1\n      },\n      // 列表数据\n      gridData: {\n        list: [],\n        total: 0\n      },\n\n      // 对话框是否展示配置\n      visibleConfig: {\n        add: false,\n        edit: false,\n        view: false\n      },\n\n      // 添加或编辑对话框校验规则\n      checkRules: {\n        roleName: [{ required: true, message: '请输入角色名称', trigger: 'blur' }],\n        roleDesc: [{ required: true, message: '请输入角色描述', trigger: 'blur' }]\n      },\n\n      // 查看数据\n      viewForm: {},\n\n      // 添加对话框数据\n      addForm: {},\n\n      // 编辑对话框数据\n      editForm: {},\n\n      /**\n       * 菜单树配置\n       */\n      props: {\n        label: 'menuName',\n        children: 'sub'\n      },\n      treeData: [],\n      // 选中的角色\n      select: {\n        menu: [],\n        role: null\n      }\n    }\n  },\n  created() {\n    this.getPageList()\n    this.initMenuTree()\n  },\n  methods: {\n    // 列表查询\n    getPageList() {\n      getPageList(this.searchForm).then((res) => {\n        const { records, total } = res.data\n        this.gridData.list = records\n        this.gridData.total = total\n      }).catch(() => {\n        this.$message.error(defaultSettings.failureSearch)\n      })\n    },\n\n    // 分页栏页数改变监听\n    handleCurrentChange(newCurrent) {\n      this.searchForm.current = newCurrent\n      this.getPageList()\n    },\n\n    // 删除\n    doDelete(id) {\n      const rowId = id\n      this.$confirm(defaultSettings.deleteText, defaultSettings.typeInfoText, {\n        confirmButtonText: defaultSettings.confirmButtonText,\n        cancelButtonText: defaultSettings.cancelButtonText,\n        type: defaultSettings.typeWarning\n      }).then(\n        async() => {\n          doDelete(rowId).then(() => {\n            this.$message.success(defaultSettings.successDelete)\n            this.getPageList()\n          })\n        })\n    },\n\n    // 添加-保存\n    doAddSave() {\n      this.$refs.addFormRef.validate(async valid => {\n        if (!valid) {\n          return\n        }\n        await doAddSave(this.addForm)\n        this.$message.success(defaultSettings.successAdd)\n        this.visibleConfig.add = false\n        this.getPageList()\n      })\n    },\n    // 添加-关闭\n    doAddClose() {\n      this.$refs.addFormRef.resetFields()\n    },\n\n    // 编辑\n    async doEdit(id) {\n      const res = await doView(id)\n      this.editForm = res.data\n      this.visibleConfig.edit = true\n    },\n\n    // 编辑-保存\n    doEditSave() {\n      this.$refs.editFormRef.validate(async valid => {\n        if (!valid) {\n          return\n        }\n        await doEditSave(this.editForm)\n        this.$message.success(defaultSettings.successEdit)\n        this.visibleConfig.edit = false\n        this.getPageList()\n      })\n    },\n\n    // 编辑-关闭\n    doEditClose() {\n      this.$refs.editFormRef.resetFields()\n    },\n    // 角色表格行点击事件\n    async roleRowChangeClick(currentRow) {\n      // 重置右侧菜单面板\n      this.select.menu = []\n      await this.initMenuTree()\n      // 查询需要勾选的\n      if (currentRow == null) {\n        this.select.role = null\n      } else {\n        // 有选中的角色\n        this.select.role = currentRow\n        // 查询角色拥有的菜单\n        const { data } = await getRoleMenu(currentRow.id)\n        if (Object.keys(data).length !== 0) {\n          this.select.menu = data\n        }\n      }\n    },\n\n    /**\n     * 菜单树配置\n     */\n    // 初始化菜单树数据\n    async initMenuTree() {\n      const res = await getMenuTree()\n      this.treeData = res.data\n    },\n\n    // 保存角色权限关联\n    async saveRoleMenu() {\n      // 判读是否选择角色\n      if (this.select.role == null) {\n        this.$message.error('请选择角色')\n      }\n      // 获取选中菜单权限\n      const selectArr = this.$refs.menuTreeRef.getCheckedKeys()\n      const data = {\n        role: this.select.role.id,\n        menu: selectArr\n      }\n      await saveRoleMenu(data).then(() => {\n        this.$message.success(defaultSettings.successSave)\n      })\n    }\n  }\n}\n</script>\n\n<style lang='scss' scoped>\n\n  .role_menu_role_class {\n    margin-right: -5px;\n  }\n\n  .role_menu_menu_class {\n    margin-left: -5px;\n    max-height: 780px;\n    overflow-y: auto;\n    .tree-class {\n        >.el-tree{\n          >.el-tree-node{\n            /*设置横向滚动条*/\n            min-width: 100%;\n            display: inline-block;\n            /*设置根节点隐藏*/\n            >.el-tree-node__content{\n              display: none;\n            }\n          }\n        }\n    }\n  }\n</style>\n"]}]}